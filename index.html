<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EZDownload</title>
    <link rel="stylesheet" href="output.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-zinc-900 text-white" style="font-family: 'Inter', sans-serif;">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-zinc-800 p-6 flex flex-col">
            <h1 class="text-2xl font-bold mb-8">EZDownload</h1>
            <nav class="flex flex-col space-y-2">
                <a href="#" class="nav-item active flex items-center space-x-3 px-4 py-2 rounded-md bg-gradient-to-r from-indigo-500 to-purple-500" data-tab="download">
                    <i class="fas fa-download"></i>
                    <span>Download</span>
                </a>
                <a href="#" class="nav-item flex items-center space-x-3 px-4 py-2 rounded-md hover:bg-zinc-700" data-tab="history">
                    <i class="fas fa-history"></i>
                    <span>History</span>
                </a>
                <a href="#" class="nav-item flex items-center space-x-3 px-4 py-2 rounded-md hover:bg-zinc-700" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </nav>
            <div class="mt-auto">
                <div class="flex items-center space-x-2 p-2 rounded-md bg-zinc-700/50">
                    <div id="statusDot" class="w-3 h-3 rounded-full bg-yellow-500"></div>
                    <span id="statusText" class="text-sm">Checking...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-8 overflow-y-auto">
            <!-- Download Tab -->
            <div class="tab-content active" id="downloadTab">
                <header class="mb-8">
                    <h2 class="text-3xl font-bold">Download Videos</h2>
                    <p class="text-zinc-400">Paste a link to get started</p>
                </header>

                <div class="space-y-6">
                    <!-- URL Input -->
                    <div class="bg-zinc-800 rounded-xl shadow-lg p-6">
                        <label for="urlInput" class="block text-sm font-medium mb-2">Video URL</label>
                        <div class="flex space-x-4">
                            <textarea id="urlInput" placeholder="Paste video URLs here (one per line)..." rows="2" class="flex-1 bg-zinc-700 rounded-md p-3 focus:ring-2 focus:ring-indigo-500 outline-none"></textarea>
                            <button id="pasteBtn" class="px-6 py-2 rounded-md bg-gradient-to-r from-indigo-500 to-purple-500 hover:brightness-110">Paste</button>
                            <button id="clearBtn" class="px-6 py-2 rounded-md bg-zinc-700 hover:bg-zinc-600">Clear</button>
                        </div>
                    </div>

                    <!-- Video Info & Download -->
                    <div id="videoInfoCard" class="bg-zinc-800 rounded-xl shadow-lg p-6" style="display: none;">
                        <div class="flex space-x-6">
                            <img id="videoThumbnail" src="" alt="Video thumbnail" class="w-48 h-27 rounded-md object-cover hover:scale-105 transition">
                            <div class="flex-1 space-y-4">
                                <h3 id="videoTitle" class="text-xl font-bold">Video Title</h3>
                                <div class="flex space-x-6 text-zinc-400">
                                    <span><i class="fas fa-user mr-2"></i><span id="videoUploader">Uploader</span></span>
                                    <span><i class="fas fa-clock mr-2"></i><span id="videoDuration">Duration</span></span>
                                    <span><i class="fas fa-eye mr-2"></i><span id="videoViews">Views</span></span>
                                </div>
                                <div class="flex space-x-4">
                                    <div class="flex-1">
                                        <label class="block text-sm font-medium mb-1">Quality</label>
                                        <select id="inlineQualitySelect" class="w-full bg-zinc-700 rounded-md px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"></select>
                                    </div>
                                    <div class="flex-1">
                                        <label class="block text-sm font-medium mb-1">Format</label>
                                        <select id="inlineFormatSelect" class="w-full bg-zinc-700 rounded-md px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500">
                                            <option value="mp4">MP4</option>
                                            <option value="webm">WebM</option>
                                            <option value="mkv">MKV</option>
                                            <option value="mp3">MP3</option>
                                            <option value="m4a">M4A</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 flex justify-end space-x-4">
                             <button id="downloadBtn" class="px-8 py-3 rounded-full bg-gradient-to-r from-green-500 to-teal-500 hover:brightness-110 text-lg font-bold">Start Download</button>
                             <button id="stopBtn" class="px-8 py-3 rounded-full bg-gradient-to-r from-red-500 to-orange-500 hover:brightness-110 text-lg font-bold" style="display: none;">Stop Download</button>
                        </div>
                    </div>

                    <!-- Progress & Log -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div id="progressCard" class="bg-zinc-800 rounded-xl shadow-lg p-6" style="display: none;">
                             <h4 class="font-bold mb-3">Download Progress</h4>
                             <div class="w-full bg-zinc-700 rounded-full h-2.5">
                                <div id="progressFill" class="bg-indigo-500 h-2.5 rounded-full" style="width: 0%"></div>
                             </div>
                             <div class="flex justify-between text-sm mt-2">
                                <span id="progressTitle">Preparing...</span>
                                <span id="progressPercentage">0%</span>
                             </div>
                             <p id="progressDetails" class="text-xs text-zinc-400 mt-1">Speed: -- | ETA: --</p>
                        </div>
                        <div class="bg-zinc-800 rounded-xl shadow-lg p-6">
                            <h4 class="font-bold mb-3">Output Log</h4>
                            <div id="logContainer" class="bg-black/40 rounded-md p-3 max-h-[200px] overflow-y-auto font-mono text-sm">
                                <div>Ready to download...</div>
                            </div>
                            <button id="clearLogBtn" class="text-xs text-zinc-400 hover:text-white mt-2">Clear Log</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Tab -->
            <div class="tab-content" id="historyTab" style="display:none;">
                 <header class="mb-8">
                    <h2 class="text-3xl font-bold">Download History</h2>
                </header>
                <div class="bg-zinc-800 rounded-xl shadow-lg p-12 text-center">
                    <i class="fas fa-history text-4xl text-zinc-500 mb-4"></i>
                    <h3 class="text-xl font-bold">Coming Soon</h3>
                    <p class="text-zinc-400">Download history will be available here.</p>
                </div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-content" id="settingsTab" style="display:none;">
                <header class="mb-8">
                    <h2 class="text-3xl font-bold">Settings</h2>
                    <p class="text-zinc-400">Customize your preferences</p>
                </header>
                <div class="space-y-6">
                    <div class="bg-zinc-800 rounded-xl shadow-lg p-6">
                        <h3 class="font-bold text-lg mb-4">Default Output Location</h3>
                        <div class="flex space-x-4">
                            <input type="text" id="outputDir" placeholder="Select download folder..." class="flex-1 bg-zinc-700 rounded-md p-3 focus:ring-2 focus:ring-indigo-500 outline-none">
                            <button id="browseBtn" class="px-6 py-2 rounded-md bg-zinc-700 hover:bg-zinc-600">Browse</button>
                            <button id="openDirBtn" class="px-6 py-2 rounded-md bg-zinc-700 hover:bg-zinc-600">Open</button>
                        </div>
                    </div>
                    <div class="bg-zinc-800 rounded-xl shadow-lg p-6">
                         <h3 class="font-bold text-lg mb-4">Default Quality & Format</h3>
                         <div class="flex space-x-4">
                            <div class="flex-1">
                                <label class="block text-sm font-medium mb-1">Quality</label>
                                <select id="qualitySelect" class="w-full bg-zinc-700 rounded-md px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500">
                                     <option value="best">Best Available</option>
                                     <option value="1080p">1080p</option>
                                     <option value="720p">720p</option>
                                </select>
                            </div>
                            <div class="flex-1">
                                <label class="block text-sm font-medium mb-1">Format</label>
                                <select id="formatSelect" class="w-full bg-zinc-700 rounded-md px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500">
                                     <option value="mp4">MP4</option>
                                     <option value="webm">WebM</option>
                                </select>
                            </div>
                        </div>
                    </div>
                     <div class="bg-zinc-800 rounded-xl shadow-lg p-6">
                        <h3 class="font-bold text-lg mb-4">yt-dlp Version</h3>
                        <div class="flex items-center space-x-4">
                            <span id="ytdlpVersion" class="flex-1">Checking...</span>
                            <button id="updateYtdlpBtn" class="px-6 py-2 rounded-md bg-zinc-700 hover:bg-zinc-600">Check for Updates</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loader">
            <div class="loader-circle"></div>
            <div class="loader-circle"></div>
            <div class="loader-circle"></div>
        </div>
    </div>

    <!-- Playlist Preview Modal -->
    <div class="modal-overlay" id="playlistModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="playlistTitle">Playlist Preview</h3>
                <button class="title-btn close-btn" id="closePlaylistModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="playlist-controls">
                    <button class="btn-secondary" id="selectAllBtn">Select All</button>
                    <button class="btn-secondary" id="deselectAllBtn">Deselect All</button>
                    <div class="range-selector">
                        <label>Select Range:</label>
                        <input type="number" id="rangeStart" min="1" placeholder="Start">
                        <span>-</span>
                        <input type="number" id="rangeEnd" min="1" placeholder="End">
                        <button class="btn-secondary" id="selectRangeBtn">Go</button>
                    </div>
                </div>
                <div class="playlist-videos" id="playlistVideosContainer">
                    <!-- Video items will be dynamically inserted here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary download-btn" id="downloadSelectedBtn">
                    <i class="fas fa-download"></i>
                    Download Selected
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="script.js"></script>
</body>
</html>